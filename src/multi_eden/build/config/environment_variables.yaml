# Multi-Eden SDK Environment Variables Manifest
# Defines ALL environment variables to set up
#
# DEFAULT BEHAVIOR:
# - source: "setting" (default if not specified)
# - setting_key: case-insensitive name match (STUB_AI -> stub_ai)
# - boolean settings -> lowercase string transform

# Variable groups for reusable sets
groups:
  auth:
    - "CUSTOM_AUTH_ENABLED"
    - "JWT_SECRET_KEY"
    - "ALLOWED_USER_EMAILS"
    - "APP_ID"
  
  stub:
    - "STUB_AI"
    - "STUB_DB"
  
  test:
    - "TEST_API_IN_MEMORY"
    - "TEST_OMIT_INTEGRATION"

environment_variables:
  # Provider stubbing controls
  - name: "STUB_AI"
    source: "env-config:stub_ai"
    default: "false"
    
  - name: "STUB_DB"
    source: "env-config:stub_db"
    default: "false"
    
  - name: "CUSTOM_AUTH_ENABLED" 
    source: "env-config:custom_auth_enabled"
    
  - name: "PROJECT_ID"
    source: "env-config:project_id"
    condition:
      local: false
  
  # Application identifier
  - name: "APP_ID"
    source: "app:id"
      
  # API server port (optional - uses protocol default if not specified)
  - name: "PORT"
    source: "env-config:port"
    optional: true
      
  # Test framework API endpoint (only when not in-memory)
  - name: "TEST_API_URL"
    source: "derived"
    method: "derive_api_url"
    condition:
      test_api_in_memory: false
      
  # Test framework variables (only in test modes)
  - name: "TEST_API_IN_MEMORY"
    source: "env-config:test_api_in_memory"
    default: true
    
  - name: "TEST_OMIT_INTEGRATION"
    source: "env-config:omit_integration"
    default: false

  # Secret environment variables
  - name: "JWT_SECRET_KEY"
    source: "secret:jwt-secret-key"
    default: "test-jwt-secret-{env:app_id}"
    condition:
      CUSTOM_AUTH_ENABLED: true
      
  - name: "GEMINI_API_KEY"
    source: "secret:gemini-api-key"
    condition:
      stub_ai: false
      
  - name: "ALLOWED_USER_EMAILS"
    source: "secret:allowed-user-emails"
    default: "test-user@static.{env:app_id}.app"
    condition:
      CUSTOM_AUTH_ENABLED: true
